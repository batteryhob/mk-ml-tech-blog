---
layout: post
title:  파이썬 자주 쓰는 코드 사전
date:   2021-05-18 00:00:00 +0900
author: 권승진
tags: computervision
excerpt: 파이썬에서 매번 구글링하는 코드들을 쉽게 찾을 수 있게 기록해 놓습니다. 
use_math: false
toc: true
# tags: 자동 수집되는 태그 띄어쓰기로 구분, 반드시 소문자로 사용
# excerpt: 메인 화면에 노출되는 post의 description
# use_math : 수식이 필요 할 경우(윗 첨자, 아랫첨자 동시 사용 불가) true | false
# toc : 목차가 필요 할 경우 true | false
# emoji 사이트: https://getemoji.com/
---

# 목적
파이썬에서 자주 쓰는 코드들 중 라이브러리로 만들기는 애매하고, 매번 구글링하기도 애매한 코드들을 빠르게 취하기 위함입니다. 기억 안나서 구글링하면, 구글링한 코드를 그때 그때 적어놓는 식으로 운용합니다. 쓰던 코드 그냥 붙여넣을 거라서 변형 되어있을 수도 있습니다.
<br/>

## 폴더 돌면서 파일 찾기
```python
def get_file_list_by_extension(video_root_path, extensions=['.mp4']):
    found_file_list = []

    for (root, dirs, files) in os.walk(video_root_path):
        if len(files) > 0:
            for file_name in files:
                file_path = os.path.join(root, file_name).replace('\\', '/')

                # if file_name[0:4] == "face":
                _, file_extension = os.path.splitext(file_name)
                file_extension = file_extension.lower()
                if file_extension in extensions:
                    found_file_list.append(file_path)

    return found_file_list
```
<hr/>

## mp4 시퀀스 이미지 순회
```python
def iterate_frame_mp4(path_in, experiment, extra_data=None):
    count = 0
    vidcap = cv2.VideoCapture(path_in)
    success, image = vidcap.read()
    
    video_analysis_result = {}

    while success:
        frame_time = int(count * 1000 / FPS)
        if image is not None:
            video_analysis_result[frame_time] = experiment.execute(image, frame_time, extra_data)

        vidcap.set(cv2.CAP_PROP_POS_MSEC, frame_time)  # 30FPS
        success, image = vidcap.read()

        count = count + 1

    return video_analysis_result
```
<hr/>

## json 처리
쓰기
```python
video_analysis_file_name = './video_detecting_{}.json'.format(uuid)
video_analysis_result = {}
with open(video_analysis_file_name, 'w') as f:
    json.dump(video_analysis_result, f, sort_keys=True, indent=2)
```
읽기
```python
with open(video_analysis_file_name, "r") as f:
    video_analysis_result = json.load(f)
```
<hr/>

## image show
이정돈 외워서 쓰긴 해야되는데....
```python
    plt.imshow(cropped_image)
    plt.show()
```